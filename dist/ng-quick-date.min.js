(function(){var l;l=angular.module("ngQuickDate",[]);l.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:"Su M Tu W Th F Sa".split(" "),dateFilter:null,disableMonthYearSelector:!1,minYear:null,isMobile:null,parseDateFunction:function(e){e=
Date.parse(e);return isNaN(e)?null:new Date(e)}},$get:function(){return this.options},set:function(e,h){var k,f,m;if("object"===typeof e){m=[];for(k in e)f=e[k],m.push(this.options[k]=f);return m}return this.options[e]=h}}});l.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$timeout","$sce","$window",function(e,h,k,f,m){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(a,l,g,d){var v,w,y,z,r,n,p,A,B,C,x;A=function(){for(var b in e)b.match(/[Hh]tml/)?
a[b]=f.trustAsHtml(e[b]||""):!a[b]&&g[b]?a[b]=g[b]:a[b]||(a[b]=e[b]);a.labelFormat||(a.labelFormat=a.dateFormat,a.disableTimepicker||(a.labelFormat+=" "+a.timeFormat));if(g.iconClass&&g.iconClass.length)return a.buttonIconHtml=f.trustAsHtml("<i ng-show='iconClass' class='"+g.iconClass+"'></i>")};v=!1;window.document.addEventListener("click",function(b){a.calendarShown&&!v&&(a.toggleCalendar(!1),a.$apply());return v=!1});angular.element(l[0])[0].addEventListener("click",function(a){return v=!0});n=
function(){var b;b=d.$modelValue?r(d.$modelValue):null;C();B(b);a.mainButtonStr=b?h("date")(b,a.labelFormat):a.placeholder;return a.invalid=d.$invalid};B=function(b){if(null!=b)return a.inputDate=h("date")(b,a.dateFormat),a.inputTime=h("date")(b,a.timeFormat);a.inputDate=null;return a.inputTime=null};p=function(b){(new Date).getFullYear();null==b&&(b=null);b=null!=b?new Date(b):new Date;"Invalid Date"===b.toString()&&(b=new Date);b.setDate(1);return a.calendarDate=new Date(b)};C=function(){var b,
c,q,e,h,f,t,g,u;q=a.calendarDate.getDay();b=z(a.calendarDate.getFullYear(),a.calendarDate.getMonth());c=Math.ceil((q+b)/7);f=[];b=new Date(a.calendarDate);b.setDate(b.getDate()+-1*q);q=t=0;for(u=c-1;0<=u?t<=u:t>=u;q=0<=u?++t:--t)for(f.push([]),g=0;6>=g;++g)c=new Date(b),a.defaultTime&&(e=a.defaultTime.split(":"),c.setHours(e[0]||0),c.setMinutes(e[1]||0),c.setSeconds(e[2]||0)),e=d.$modelValue&&c&&w(c,d.$modelValue),h=w(c,new Date),f[q].push({date:c,selected:e,disabled:"function"===typeof a.dateFilter?
!a.dateFilter(c):!1,other:c.getMonth()!==a.calendarDate.getMonth(),today:h}),b.setDate(b.getDate()+1);return a.weeks=f};d.$parsers.push(function(b){return a.required&&null==b?(d.$setValidity("required",!1),null):angular.isDate(b)?(d.$setValidity("required",!0),b):angular.isString(b)?(d.$setValidity("required",!0),a.parseDateFunction(b)):null});d.$formatters.push(function(b){if(angular.isDate(b))return b;if(angular.isString(b))return a.parseDateFunction(b)});x=function(a){return"string"===typeof a?
r(a):a};r=e.parseDateFunction;w=function(a,c,d){null==d&&(d=!1);if(d)return 0===a-c;a=x(a);c=x(c);return a&&c&&a.getYear()===c.getYear()&&a.getMonth()===c.getMonth()&&a.getDate()===c.getDate()};y=function(a,c){return a&&c?parseInt(a.getTime()/6E4)===parseInt(c.getTime()/6E4):!1};z=function(a,c){return[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,30,31][c]};d.$render=function(){p(d.$viewValue);return n()};d.$viewChangeListeners.unshift(function(){p(d.$viewValue);n();if(a.onChange)return a.onChange()});
a.$watch("calendarShown",function(a,c){var d;if(a)return d=angular.element(l[0].querySelector(".quickdate-date-input"))[0],d.select()});a.toggleCalendar=function(a,c){var d,e,f,h,g,k;g=d=e=k=h=null;f=function(){var a;a=+new Date-k;return a<c&&0<a?g=setTimeout(f,c-a):g=null};return function(){e=this;d=arguments;k=+new Date;g||(g=setTimeout(f,c),h=a.apply(e,d),e=d=null);return h}}(function(b){return isFinite(b)?a.calendarShown=b:a.calendarShown=!a.calendarShown},150);a.selectDate=function(b,c){null==
c&&(c=!0);!d.$viewValue&&b||d.$viewValue&&!b||b&&d.$viewValue&&(b.getTime(),d.$viewValue.getTime());if("function"===typeof a.dateFilter&&!a.dateFilter(b))return!1;d.$setViewValue(b);c&&a.toggleCalendar(!1);return!0};a.selectDateFromInput=function(b){var c,e,f;null==b&&(b=!1);try{c=r(a.inputDate);if(!c)throw"Invalid Date";if(!a.disableTimepicker&&a.inputTime&&a.inputTime.length&&c){f=a.disableTimepicker?"00:00:00":a.inputTime;e=r(""+a.inputDate+" "+f);if(!e)throw"Invalid Time";c=e}if(!y(d.$viewValue,
c)&&!a.selectDate(c,!1))throw"Invalid Date";b&&a.toggleCalendar(!1);a.inputDateErr=!1;return a.inputTimeErr=!1}catch(g){if("Invalid Date"===g)return a.inputDateErr=!0;if("Invalid Time"===g)return a.inputTimeErr=!0}};a.onDateInputTab=function(){a.disableTimepicker&&a.toggleCalendar(!1);return!0};a.onTimeInputTab=function(){a.toggleCalendar(!1);return!0};a.nextMonth=function(){p(new Date((new Date(a.calendarDate)).setMonth(a.calendarDate.getMonth()+1)));return n()};a.prevMonth=function(){p(new Date((new Date(a.calendarDate)).setMonth(a.calendarDate.getMonth()-
1)));return n()};a.clear=function(){return a.selectDate(null,!0)};a.initYearSelector=function(){a.yearArray=[];for(var b=new Date,c=b.getFullYear(),b=g.minYear?Math.abs(g.minYear-b.getFullYear()):50,d=0;d<b;d++)a.yearArray.push({id:d,name:c-d})};a.initMonthSelector=function(){a.monthArray=[{id:"00",name:"January"},{id:"01",name:"February"},{id:"02",name:"March"},{id:"03",name:"April"},{id:"04",name:"May"},{id:"05",name:"June"},{id:"06",name:"July"},{id:"07",name:"August"},{id:"08",name:"September"},
{id:"09",name:"October"},{id:"10",name:"November"},{id:"11",name:"December"}]};a.setMonthSelector=function(){a.monthSelected=d.$modelValue?(new Date(Date.parse(d.$modelValue))).getUTCMonth():a.calendarDate.getUTCMonth()};a.setYearSelector=function(){a.yearSelected=d.$modelValue?(new Date(Date.parse(d.$modelValue))).getUTCFullYear():a.calendarDate.getUTCFullYear()};a.changeYear=function(b){var c=new Date;void 0!==d.$modelValue&&(c=new Date(Date.parse(d.$modelValue)));b=new Date(b,c.getUTCMonth(),c.getUTCDate(),
c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds());a.selectDate(b,!1)};a.changeMonth=function(b){var c=new Date;void 0!==d.$modelValue&&(c=new Date(Date.parse(d.$modelValue)));b=new Date(c.getUTCFullYear(),b,c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds());a.selectDate(b,!1)};a.mobileScale=function(){a.mobileScale=480>m.innerWidth?"width: "+m.innerWidth+"px; position: fixed; top: 50%; left: 50%; -webkit-transform: translate3d(-50%, -52%, 0);-moz-transform: translateX(-50%) translateY(-50%);-ms-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%)":
"width: 400px; position: fixed; top: 50%; left: 50%; -webkit-transform: translate3d(-50%, -52%, 0);-moz-transform: translateX(-50%) translateY(-50%);-ms-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%)"};g.isMobile&&a.mobileScale();return function(){var b;A();a.toggleCalendar(!1);a.weeks=[];a.inputDate=null;a.inputTime=null;a.invalid=!0;"string"===typeof g.initValue&&d.$setViewValue(g.initValue);a.defaultTime||(b=new Date(2013,0,1,12,0),a.datePlaceholder=h("date")(b,
a.dateFormat),a.timePlaceholder=h("date")(b,a.timeFormat));p();a.initYearSelector();a.initMonthSelector();a.setMonthSelector();a.setYearSelector();k(function(){a.setMonthSelector();a.setYearSelector()},1E3);return n()}()},template:"<div class='quickdate'>\n<a href='' ng-focus='toggleCalendar()' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr}}</a>\n<div class='quickdate-mobile-overlay' ng-show='calendarShown' ng-click='toggleCalendar()'></div><div class='quickdate-popup' ng-class='{open: calendarShown}' style='{{mobileScale}}'>\n<a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html='closeButtonHtml'></div></a>\n<div class='quickdate-text-inputs'>\n<div class='quickdate-input-wrapper'>\n<label>Date</label>\n<input class='quickdate-date-input' ng-class=\"{'ng-invalid': inputDateErr}\" name='inputDate' type='text' ng-model='inputDate' placeholder='{{ datePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onDateInputTab()' />\n</div>\n<div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n<label>Time</label>\n<input class='quickdate-time-input' ng-class=\"{'ng-invalid': inputTimeErr}\" name='inputTime' type='text' ng-model='inputTime' placeholder='{{ timePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onTimeInputTab()'>\n</div>\n</div>\n<div class='quickdate-calendar-header' ng-class=\"{ 'qdc-header-height-fix' : !disableMonthYearSelector }\">\n<a href='' class='quickdate-prev-month quickdate-action-link' ng-if='disableMonthYearSelector' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html='prevLinkHtml'></div></a>\n<span ng-if='disableMonthYearSelector' class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n<span ng-if='!disableMonthYearSelector' class='quickdate-month'><div class=\"quickdate-month-selector\"><select ng-model=\"monthSelected\" ng-change=\"changeMonth(monthSelected)\"><option ng-repeat=\"month in monthArray\" ng-selected=\"monthSelected == month.id\" value=\"{{month.id}}\">{{month.name}}</option></select></div>\n<div class=\"quickdate-year-selector\"><select ng-model=\"yearSelected\" ng-change=\"changeYear(yearSelected)\"><option ng-repeat=\"year in yearArray\" ng-selected=\"yearSelected == year.name\" value=\"{{year.name}}\">{{year.name}}</option></select></div>\n</span>\n<a href='' ng-if='disableMonthYearSelector' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html='nextLinkHtml'></div></a>\n</div>\n<table class='quickdate-calendar'>\n<thead>\n<tr>\n<th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat='week in weeks'>\n<td ng-mousedown='selectDate(day.date, true, true);setMonthSelector(true);setYearSelector(true)' ng-click='$event.preventDefault()' ng-class='{\"other-month\": day.other, \"disabled-date\": day.disabled, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n</tr>\n</tbody>\n</table>\n<div class='quickdate-popup-footer'>\n<a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n</div>\n</div>\n</div>"}}]);
l.directive("ngEnter",function(){return function(e,h,k){return h.bind("keydown keypress",function(f){if(13===f.which)return e.$apply(k.ngEnter),f.preventDefault()})}});l.directive("onTab",function(){return{restrict:"A",link:function(e,h,k){return h.bind("keydown keypress",function(f){if(9===f.which&&!f.shiftKey)return e.$apply(k.onTab)})}}})}).call(this);
