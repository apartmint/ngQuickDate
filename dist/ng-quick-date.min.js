(function(){var m;m=angular.module("ngQuickDate",[]);m.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,language:null,dayAbbreviations:"Su M Tu W Th F Sa".split(" "),dateFilter:null,disableMonthYearSelector:!1,minYear:null,isMobile:null,
parseDateFunction:function(h){h=Date.parse(h);return isNaN(h)?null:new Date(h)}},$get:function(){return this.options},set:function(h,e){var l,k,n;if("object"===typeof h){n=[];for(l in h)k=h[l],n.push(this.options[l]=k);return n}return this.options[h]=e}}});m.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$timeout","$sce","$window",function(h,e,l,k,n){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(a,m,f,g){var u,v,x,
y,r,p,q,z,A,B,w;z=function(){for(var b in h)b.match(/[Hh]tml/)?a[b]=k.trustAsHtml(h[b]||""):!a[b]&&f[b]?a[b]=f[b]:a[b]||(a[b]=h[b]);a.labelFormat||(a.labelFormat=a.dateFormat,a.disableTimepicker||(a.labelFormat+=" "+a.timeFormat));if(f.iconClass&&f.iconClass.length)return a.buttonIconHtml=k.trustAsHtml("<i ng-show='iconClass' class='"+f.iconClass+"'></i>")};u=!1;window.document.addEventListener("click",function(b){a.calendarShown&&!u&&(a.toggleCalendar(!1),a.$apply());return u=!1});angular.element(m[0])[0].addEventListener("click",
function(a){return u=!0});p=function(){var b;b=g.$modelValue?r(g.$modelValue):null;B();A(b);a.mainButtonStr=b?a.translateDate(null,b):a.placeholder;return a.invalid=g.$invalid};A=function(b){if(null!=b)return a.inputDate=e("date")(b,a.dateFormat),a.inputTime=e("date")(b,a.timeFormat);a.inputDate=null;return a.inputTime=null};q=function(b){(new Date).getFullYear();null==b&&(b=null);b=null!=b?new Date(b):new Date;"Invalid Date"===b.toString()&&(b=new Date);b.setDate(1);return a.calendarDate=new Date(b)};
B=function(){var b,c,d,f,h,e,k,l,t;d=a.calendarDate.getDay();b=y(a.calendarDate.getFullYear(),a.calendarDate.getMonth());c=Math.ceil((d+b)/7);e=[];b=new Date(a.calendarDate);b.setDate(b.getDate()+-1*d);d=k=0;for(t=c-1;0<=t?k<=t:k>=t;d=0<=t?++k:--k)for(e.push([]),l=0;6>=l;++l)c=new Date(b),a.defaultTime&&(f=a.defaultTime.split(":"),c.setHours(f[0]||0),c.setMinutes(f[1]||0),c.setSeconds(f[2]||0)),f=g.$modelValue&&c&&v(c,g.$modelValue),h=v(c,new Date),e[d].push({date:c,selected:f,disabled:"function"===
typeof a.dateFilter?!a.dateFilter(c):!1,other:c.getMonth()!==a.calendarDate.getMonth(),today:h}),b.setDate(b.getDate()+1);return a.weeks=e};g.$parsers.push(function(b){return a.required&&null==b?(g.$setValidity("required",!1),null):angular.isDate(b)?(g.$setValidity("required",!0),b):angular.isString(b)?(g.$setValidity("required",!0),a.parseDateFunction(b)):null});g.$formatters.push(function(b){if(angular.isDate(b))return b;if(angular.isString(b))return a.parseDateFunction(b)});w=function(a){return"string"===
typeof a?r(a):a};r=h.parseDateFunction;v=function(a,c,d){null==d&&(d=!1);if(d)return 0===a-c;a=w(a);c=w(c);return a&&c&&a.getYear()===c.getYear()&&a.getMonth()===c.getMonth()&&a.getDate()===c.getDate()};x=function(a,c){return a&&c?parseInt(a.getTime()/6E4)===parseInt(c.getTime()/6E4):!1};y=function(a,c){return[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,30,31][c]};g.$render=function(){q(g.$viewValue);return p()};g.$viewChangeListeners.unshift(function(){q(g.$viewValue);p();if(a.onChange)return a.onChange()});
a.$watch("calendarShown",function(a,c){var d;if(a)return d=angular.element(m[0].querySelector(".quickdate-date-input"))[0],d.select()});a.toggleCalendar=function(a,c){var d,g,f,h,e,k;e=d=g=k=h=null;f=function(){var a;a=+new Date-k;return a<c&&0<a?e=setTimeout(f,c-a):e=null};return function(){g=this;d=arguments;k=+new Date;e||(e=setTimeout(f,c),h=a.apply(g,d),g=d=null);return h}}(function(b){return isFinite(b)?a.calendarShown=b:a.calendarShown=!a.calendarShown},150);a.selectDate=function(b,c){null==
c&&(c=!0);!g.$viewValue&&b||g.$viewValue&&!b||b&&g.$viewValue&&(b.getTime(),g.$viewValue.getTime());if("function"===typeof a.dateFilter&&!a.dateFilter(b))return!1;g.$setViewValue(b);c&&a.toggleCalendar(!1);return!0};a.selectDateFromInput=function(b){var c,d,f;null==b&&(b=!1);try{c=r(a.inputDate);if(!c)throw"Invalid Date";if(!a.disableTimepicker&&a.inputTime&&a.inputTime.length&&c){f=a.disableTimepicker?"00:00:00":a.inputTime;d=r(""+a.inputDate+" "+f);if(!d)throw"Invalid Time";c=d}if(!x(g.$viewValue,
c)&&!a.selectDate(c,!1))throw"Invalid Date";b&&a.toggleCalendar(!1);a.inputDateErr=!1;return a.inputTimeErr=!1}catch(e){if("Invalid Date"===e)return a.inputDateErr=!0;if("Invalid Time"===e)return a.inputTimeErr=!0}};a.onDateInputTab=function(){a.disableTimepicker&&a.toggleCalendar(!1);return!0};a.onTimeInputTab=function(){a.toggleCalendar(!1);return!0};a.nextMonth=function(){q(new Date((new Date(a.calendarDate)).setMonth(a.calendarDate.getMonth()+1)));return p()};a.prevMonth=function(){q(new Date((new Date(a.calendarDate)).setMonth(a.calendarDate.getMonth()-
1)));return p()};a.clear=function(){return a.selectDate(null,!0)};a.initYearSelector=function(){a.yearArray=[];for(var b=new Date,c=b.getFullYear(),b=f.minYear?Math.abs(f.minYear-b.getFullYear()):50,d=0;d<b;d++)a.yearArray.push({id:d,name:c-d})};a.initMonthSelector=function(){"zh"===f.language&&(a.monthArray=[{id:"00",name:"\u4e00\u6708"},{id:"01",name:"\u4e8c\u6708"},{id:"02",name:"\u4e09\u6708"},{id:"03",name:"\u56db\u6708"},{id:"04",name:"\u4e94\u6708"},{id:"05",name:"\u516d\u6708"},{id:"06",name:"\u4e03\u6708"},
{id:"07",name:"\u516b\u6708"},{id:"08",name:"\u4e5d\u6708"},{id:"09",name:"\u5341\u6708"},{id:"10",name:"\u5341\u4e00\u6708"},{id:"11",name:"\u5341\u4e8c\u6708"}]);"es"===f.language&&(a.monthArray=[{id:"00",name:"Enero"},{id:"01",name:"Febrero"},{id:"02",name:"Marzo"},{id:"03",name:"Abril"},{id:"04",name:"Mayo"},{id:"05",name:"Junio"},{id:"06",name:"Julio"},{id:"07",name:"Agosto"},{id:"08",name:"Setiembre"},{id:"09",name:"Octubre"},{id:"10",name:"Noviembre"},{id:"11",name:"Diciembre"}]);"fr"===f.language&&
(a.monthArray=[{id:"00",name:"Janvier"},{id:"01",name:"F\u00e9vrier"},{id:"02",name:"Mars"},{id:"03",name:"Avril"},{id:"04",name:"Mai"},{id:"05",name:"Juin"},{id:"06",name:"Juillet"},{id:"07",name:"Ao\u00fbt"},{id:"08",name:"Septembre"},{id:"09",name:"Octobre"},{id:"10",name:"Novembre"},{id:"11",name:"D\u00e9cembre"}]);"en"===f.language&&(a.monthArray=[{id:"00",name:"January"},{id:"01",name:"February"},{id:"02",name:"March"},{id:"03",name:"April"},{id:"04",name:"May"},{id:"05",name:"June"},{id:"06",
name:"July"},{id:"07",name:"August"},{id:"08",name:"September"},{id:"09",name:"October"},{id:"10",name:"November"},{id:"11",name:"December"}])};a.setMonthSelector=function(){a.monthSelected=g.$modelValue?(new Date(Date.parse(g.$modelValue))).getUTCMonth():a.calendarDate.getUTCMonth()};a.setYearSelector=function(){a.yearSelected=g.$modelValue?(new Date(Date.parse(g.$modelValue))).getUTCFullYear():a.calendarDate.getUTCFullYear()};a.changeYear=function(b){var c=new Date;a.currentYearSelected=b;void 0!==
g.$modelValue&&(c=new Date(Date.parse(g.$modelValue)));b=new Date(b,c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds());a.selectDate(b,!1)};a.changeMonth=function(b){var c=new Date;a.currentMonthSelected=b;void 0!==g.$modelValue&&(c=new Date(Date.parse(g.$modelValue)));b=new Date(c.getUTCFullYear(),b,c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds());a.selectDate(b,!1)};a.mobileScale=function(){a.mobileScale=480>n.innerWidth?"width: "+n.innerWidth+
"px; position: fixed; top: 50%; left: 50%; -webkit-transform: translate3d(-50%, -52%, 0);-moz-transform: translateX(-50%) translateY(-50%);-ms-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%)":"width: 400px; position: fixed; top: 50%; left: 50%; -webkit-transform: translate3d(-50%, -52%, 0);-moz-transform: translateX(-50%) translateY(-50%);-ms-transform: translateX(-50%) translateY(-50%);transform: translateX(-50%) translateY(-50%)"};a.toggleMonthSelector=
function(){a.dropDownMonthOpen?a.dropDownMonthOpen=!1:a.dropDownMonthOpen=!0;a.dropDownYearOpen=!1};a.toggleYearSelector=function(){a.dropDownYearOpen?a.dropDownYearOpen=!1:a.dropDownYearOpen=!0;a.dropDownMonthOpen=!1};a.applyMobileDropDownHack=function(a){l(function(){document.getElementById(a+"-selector-mobile").setAttribute("top",document.getElementById(a+"-si-mobile").offsetHeight);document.getElementById(a+"-selector-mobile").setAttribute("left",document.getElementById(a+"-si-mobile").offsetWidth)},
10)};a.translateDate=function(b,c){var d=[];d.January={en:"January",es:"Enero",zh:"\u4e00\u6708",fr:"Janvier"};d.February={en:"February",es:"Febrero",zh:"\u4e8c\u6708",fr:"F\u00e9vrier"};d.March={en:"March",es:"Marzo",zh:"\u4e09\u6708",fr:"Mars"};d.April={en:"April",es:"Abril",zh:"\u56db\u6708",fr:"Avril"};d.May={en:"May",es:"Mayo",zh:"\u4e94\u6708",fr:"Mai"};d.June={en:"June",es:"Junio",zh:"\u516d\u6708",fr:"Juin"};d.July={en:"July",es:"Julio",zh:"\u4e03\u6708",fr:"Juillet"};d.August={en:"August",
es:"Agosto",zh:"\u516b\u6708",fr:"Ao\u00fbt"};d.September={en:"September",es:"Setiembre",zh:"\u4e5d\u6708",fr:"Septembre"};d.October={en:"October",es:"Octubre",zh:"\u5341\u6708",fr:"Octobre"};d.November={en:"November",es:"Noviembre",zh:"\u5341\u4e00\u6708",fr:"Novembre"};d.December={en:"December",es:"Diciembre",zh:"\u5341\u4e8c\u6708",fr:"D\u00e9cembre"};return c?d[e("date")(c,"MMMM")][f.language]+" "+e("date")(c,"d")+", "+e("date")(c,"yyyy"):"MMMM"===b?d[e("date")(a.calendarDate,"MMMM")][f.language]:
d[e("date")(a.calendarDate,"MMMM")][f.language]+" "+e("date")(a.calendarDate,"yyyy")};a.dropDownMonthOpen=!1;a.dropDownYearOpen=!1;"zh"===f.language&&(a.dayAbbreviations="\u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d \u5468\u65e5".split(" "));"es"===f.language&&(a.dayAbbreviations="Lu Ma Mi Ju Vi Sa Do".split(" "));"fr"===f.language&&(a.dayAbbreviations="Lu Ma Me Je Ve Sa Di".split(" "));f.isMobile&&a.mobileScale();a.applyMobileDropDownHack("qdc-month");a.applyMobileDropDownHack("qdc-year");
return function(){var b;z();a.toggleCalendar(!1);a.weeks=[];a.inputDate=null;a.inputTime=null;a.invalid=!0;"string"===typeof f.initValue&&g.$setViewValue(f.initValue);a.defaultTime||(b=new Date(2013,0,1,12,0),a.datePlaceholder=e("date")(b,a.dateFormat),a.timePlaceholder=e("date")(b,a.timeFormat));q();a.initYearSelector();a.initMonthSelector();a.setMonthSelector();a.setYearSelector();l(function(){a.setMonthSelector();a.setYearSelector()},1E3);return p()}()},template:'<div class=\'quickdate\'>\n<a href=\'\' ng-focus=\'toggleCalendar()\' ng-click=\'toggleCalendar()\' class=\'quickdate-button\' title=\'{{hoverText}}\'><div ng-hide=\'iconClass\' ng-bind-html=\'buttonIconHtml\'></div>{{mainButtonStr}}</a>\n<div class=\'quickdate-mobile-overlay\' ng-show=\'calendarShown\' ng-click=\'toggleCalendar()\'></div><div class=\'quickdate-popup\' ng-class=\'{open: calendarShown}\' style=\'{{mobileScale}}\'>\n<a href=\'\' tabindex=\'-1\' class=\'quickdate-close\' ng-click=\'toggleCalendar()\'><div ng-bind-html=\'closeButtonHtml\'></div></a>\n<div class=\'quickdate-text-inputs\'>\n<div class=\'quickdate-input-wrapper\'>\n<label>Date</label>\n<input class=\'quickdate-date-input\' ng-class="{\'ng-invalid\': inputDateErr}" name=\'inputDate\' type=\'text\' ng-model=\'inputDate\' placeholder=\'{{ datePlaceholder }}\' ng-enter="selectDateFromInput(true)" ng-blur="selectDateFromInput(false)" on-tab=\'onDateInputTab()\' />\n</div>\n<div class=\'quickdate-input-wrapper\' ng-hide=\'disableTimepicker\'>\n<label>Time</label>\n<input class=\'quickdate-time-input\' ng-class="{\'ng-invalid\': inputTimeErr}" name=\'inputTime\' type=\'text\' ng-model=\'inputTime\' placeholder=\'{{ timePlaceholder }}\' ng-enter="selectDateFromInput(true)" ng-blur="selectDateFromInput(false)" on-tab=\'onTimeInputTab()\'>\n</div>\n</div>\n<div class=\'quickdate-calendar-header\' ng-class="{ \'qdc-header-height-fix\' : !disableMonthYearSelector }">\n<a href=\'\' class=\'quickdate-prev-month quickdate-action-link\' ng-if=\'disableMonthYearSelector\' tabindex=\'-1\' ng-click=\'prevMonth()\'><div ng-bind-html=\'prevLinkHtml\'></div></a>\n<span ng-if=\'disableMonthYearSelector\' class=\'quickdate-month\'>{{translateDate()}}</span>\n<span ng-if=\'!disableMonthYearSelector\' class=\'quickdate-month\'><div class="quickdate-month-selector select-overflow"><div ng-show="isMobile" class="selectize-control single"><select id="qdc-month-selector-mobile" class="native-mobile-dropdown" ng-model="monthSelected" ng-change="changeMonth(monthSelected)"><option ng-repeat="month in monthArray" ng-selected="monthSelected == month.id" value="{{month.id}}">{{month.name}}</option></select><div class="selectize-input" id="qdc-month-si-mobile"><div class="ui-select-match"><span class="ng-binding ng-scope" ng-bind="translateDate(\'MMMM\')"></span></div></div></div><div class="selectize-control single" ng-show="!isMobile" ng-click="toggleMonthSelector()"><div class="selectize-input"><div class="ui-select-match"><span class="ng-binding ng-scope" ng-bind="translateDate(\'MMMM\')"></span></div></div><div ng-show="dropDownMonthOpen" class="ui-select-choices selectize-dropdown single" repeat="month in monthArray"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-row ng-scope" ng-class="{active: month.id === currentMonthSelected}" ng-repeat="month in monthArray" ng-click="changeMonth(month.id)"><div class="option ui-select-choices-row-inner" data-selectable=""><span class="ng-binding ng-scope">{{month.name}}</span></div></div></div></div></div></div><div class="quickdate-year-selector select-overflow"><div ng-show="isMobile" class="selectize-control single"><select id="qdc-year-selector-mobile" class="native-mobile-dropdown" ng-model="yearSelected" ng-change="changeYear(yearSelected)"><option ng-repeat="year in yearArray" ng-selected="yearSelected == year.name" value="{{year.name}}">{{year.name}}</option></select><div class="selectize-input" id="qdc-year-si-mobile"><div class="ui-select-match"><span class="ng-binding ng-scope">{{calendarDate | date:\'yyyy\'}}</span></div></div></div><div class="selectize-control single" ng-show="!isMobile" ng-click="toggleYearSelector()"><div class="selectize-input"><div class="ui-select-match"><span class="ng-binding ng-scope">{{calendarDate | date:\'yyyy\'}}</span></div></div><div ng-show="dropDownYearOpen" class="ui-select-choices selectize-dropdown single" repeat="year in yearArray"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-row ng-scope" ng-class="{active: year.name === currentYearSelected}" ng-repeat="year in yearArray" ng-click="changeYear(year.name)"><div class="option ui-select-choices-row-inner" data-selectable=""><span class="ng-binding ng-scope">{{year.name}}</span></div></div></div></div></div></div></span>\n<a href=\'\' ng-if=\'disableMonthYearSelector\' class=\'quickdate-next-month quickdate-action-link\' ng-click=\'nextMonth()\' tabindex=\'-1\' ><div ng-bind-html=\'nextLinkHtml\'></div></a>\n</div>\n<table class=\'quickdate-calendar\'>\n<thead>\n<tr>\n<th ng-repeat=\'day in dayAbbreviations\'>{{day}}</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat=\'week in weeks\'>\n<td ng-mousedown=\'selectDate(day.date, true, true);setMonthSelector(true);setYearSelector(true)\' ng-click=\'$event.preventDefault()\' ng-class=\'{"other-month": day.other, "disabled-date": day.disabled, "selected": day.selected, "is-today": day.today}\' ng-repeat=\'day in week\'>{{day.date | date:\'d\'}}</td>\n</tr>\n</tbody>\n</table>\n<div class=\'quickdate-popup-footer\'>\n<a href=\'\' class=\'quickdate-clear\' tabindex=\'-1\' ng-hide=\'disableClearButton\' ng-click=\'clear()\'>Clear</a>\n</div>\n</div>\n</div>'}}]);
m.directive("ngEnter",function(){return function(h,e,l){return e.bind("keydown keypress",function(e){if(13===e.which)return h.$apply(l.ngEnter),e.preventDefault()})}});m.directive("onTab",function(){return{restrict:"A",link:function(h,e,l){return e.bind("keydown keypress",function(e){if(9===e.which&&!e.shiftKey)return h.$apply(l.onTab)})}}})}).call(this);
